#    library(devtools)
#    install_github(repo = "rustfaRe", username = "muuankarski")


fs <- list.files("rustfaRe/R/", full.names = T)
for (f in fs) {source(f)}

fs <- list.files("rustfaRe/data/", full.names = T)
for (f in setdiff(fs, "rustfaRe/data//datalist")) {load(f)}

## Functions and examples

### Rosstat regional statistics

#To see current available data

rt_regio_catalog()

#Warning message:
#In data(measuredata_regio) : data set ‘measuredata_regio’ not found


#To download one of the datasets with English region labels

rt_regio(measure,english=TRUE)

Error in rt_regio(measure, english = TRUE) : object 'y.long' not found
In addition: Warning messages:
1: In if (measure == "average_wage") { :
  the condition has length > 1 and only the first element will be used
2: In if (measure == "gross_regional_product") { :
  the condition has length > 1 and only the first element will be used
3: In if (measure == "population") { :
  the condition has length > 1 and only the first element will be used
4: In if (measure == "life_expectancy") { :
  the condition has length > 1 and only the first element will be used
5: In if (measure == "crude_birth_rate") { :
  the condition has length > 1 and only the first element will be used
6: In if (measure == "mortality_rate") { :
  the condition has length > 1 and only the first element will be used
7: In if (measure == "infant_mortality_rate") { :
  the condition has length > 1 and only the first element will be used




#An example:

head(rt_regio("mortality_rate",english=TRUE))

# OK

### Spatial operations

#Download shapefile from [GADM](http://www.gadm.org/)

#GetRusADM(level)

#Level accepts thee values, 0-2.
#- 0: whole country
#- 1: administrative boundaries at the level of federal regions/oblasts
#- 2: administrative boundaries at the level of rayons/krais

#To test this out there is a `rt_plotmap()` function that reguires three arguments: `measure`, `year` and `level`.

#Following code returns following map using ggplot2-package:

rt_plotmap("mortality_rate","2010",1)

#spatial_operations.R:  library(rustfaRe)

> rt_plotmap("mortality_rate","2010",1)
Loading required package: sp
rgdal: version: 0.8-9, (SVN revision Unversioned directory)
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.9.0, released 2011/12/29
Path to GDAL shared files: /usr/share/gdal/1.9
Loaded PROJ.4 runtime: Rel. 4.7.1, 23 September 2009, [PJ_VERSION: 470]
Path to PROJ.4 shared files: (autodetected)
rgeos version: 0.2-17, (SVN revision Unversioned directory)
 GEOS runtime version: 3.3.3-CAPI-1.7.4 
 Polygon checking: TRUE 

but no figure

#![Mortality rates in Russian regions in 2010 (Source: Rosstat)](http://ubuntuone.com/68g7EoK9q4nUjGUzKZWxPS)